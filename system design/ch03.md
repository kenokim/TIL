## System design 접근 방법
1. 기능 요구사항을 정리하라.
2. 개략적인 설계안을 제시하고 동의를 구하라.
3. 상세 설계 -> 성능에 대해
4. 추가적인 질문, 답변

## 예시: 뉴스 피드 서비스
1. 기능 요구사항: 포스트 등록 기능, 친구의 피드 조회 기능
2. 개략적인 설계안: 포스트를 등록하면, 쓰기 시점에 사용자의 친구 목록을 찾아 피드를 push 한다. (또는 읽기 시점에 pull 한다.)
3. 상셰 설계: 포스트 등록과 피드 push -> 비동기 처리가 가능하므로 message queue 를 도입하자. 각 디비 앞에는 캐시를 두자.
  -> 여기에 message queue 를 도입하는 이유가 뭔지? 
4. 추가적인 질문: 포스트가 갑자기 많이 올라온다. 쓰기 트래픽이 몰리면 어떻게 할 것인가?
  -> 이벤트 driven 구조에서 message queue 에 메시지가 몰리면 어떻게 되는지?

## 참고 자료
- https://learn.microsoft.com/en-us/azure/architecture/browse/
- https://medium.com/@sonal.dhanetwal.rai/instagram-system-design-a7bd2aa820c
![image](https://github.com/user-attachments/assets/76383728-b3d4-4c5d-9f86-74f39fa337db)


## 캐시 패턴 설명

## 1. Cache-aside (Lazy Loading)
### 설명
- 애플리케이션이 데이터베이스나 원본 데이터를 먼저 조회하고, 데이터를 캐시에 저장합니다.
- 캐시에 데이터가 없을 경우, 원본 데이터 소스에서 가져와 캐시에 저장합니다.

### 장점
- 자주 조회되는 데이터만 캐시에 저장되므로 효율적입니다.
- 캐시 데이터가 오래되지 않도록 원본 데이터의 최신 상태를 유지할 수 있습니다.

### 단점
- 첫 번째 요청은 캐시 적중률이 낮아 느릴 수 있습니다.

### 사용 사례
- 읽기 빈도가 높은 데이터.
- 특정 데이터가 자주 변경되지는 않지만 최신 상태를 유지해야 하는 경우.

---

## 2. Write-through
### 설명
- 데이터를 원본 데이터베이스에 쓰기 전에 캐시에 먼저 저장합니다.
- 캐시와 데이터베이스가 항상 동기화됩니다.

### 장점
- 캐시 일관성이 보장됩니다.
- 데이터 갱신 시점에 캐시가 업데이트됩니다.

### 단점
- 쓰기 작업이 느려질 수 있습니다.
- 쓰기 빈도가 높은 경우, 캐시 효율성이 떨어질 수 있습니다.

### 사용 사례
- 쓰기 작업이 적고 데이터 일관성이 중요한 경우.

---

## 3. Write-behind (Write-back)
### 설명
- 캐시에 데이터를 먼저 쓰고, 비동기로 원본 데이터베이스에 저장합니다.
- 쓰기 작업이 캐시에만 영향을 미치므로 빠릅니다.

### 장점
- 쓰기 작업 성능이 크게 향상됩니다.
- 캐시에서 데이터를 주로 사용하므로 데이터베이스 부하를 줄입니다.

### 단점
- 데이터 손실 위험이 있습니다 (캐시 장애 발생 시).
- 데이터베이스와 캐시 간의 일관성이 일시적으로 깨질 수 있습니다.

### 사용 사례
- 쓰기 빈도가 높고 약간의 데이터 일관성 지연을 허용할 수 있는 경우.

---

## 4. Read-through
### 설명
- 애플리케이션이 캐시에 데이터를 요청하고, 캐시에서 데이터가 없으면 원본 데이터 소스에서 가져와 자동으로 캐시에 저장합니다.

### 장점
- 캐시 로직이 투명하게 작동합니다.
- 애플리케이션 코드에서 캐시 로직을 별도로 구현할 필요가 없습니다.

### 단점
- 캐시 공급자가 지원해야 하며, 구현이 복잡할 수 있습니다.

### 사용 사례
- 캐시 공급자와 통합된 솔루션을 사용하는 경우 (예: Redis, Memcached).
